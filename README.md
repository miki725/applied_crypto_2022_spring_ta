# Applied Cryptography TA Scripts

## Structure

```shell
➜ tree
.
├── <problem set>
│   ├── source                      # autograder stuff goes here
│   │   ├── artifacts.py            # creates artifacts for grading
│   │   ├── input.py                # either extracts input from artifacts or generates it from scratch
│   │   ├── solution.py             # reference solution
│   │   └── tests.py                # pytest unittests which power autograder
│   └── submission
│       └── ps                      # copied from ../source/ but can be created from clipboard for local testing
├── Pipfile                         | configuration files for autograder
├── ...                             | but also used to bootstrap local setup
├── conftest.py                     | for testing
└── setup.sh
```

## Requirements

### System deps

- `brew install colordiff`

### Python version

Gradescope runs on py3.6 so its easier to reproduce similar env locally.
You can use [`pyenv`](https://github.com/pyenv/pyenv):

```bash
pyenv install 3.6.15
```

### Pipenv

Pipenv manages local python deps:

```bash
python3 -m pip install pipenv
pipenv install
```

### Shell

In order to use all deps locally you **must** activate pipenv envs via:

```bash
pipenv shell
```

## Makefile Utilities

### Testing Reference Solution

```bash
# runs diff between example output and output
# generated by solution given example input
make <problemset>/diff

# runs grading script
make <problemset>/grade
```

### Testing With Clipboard

Same as above but requires `PASTE=true` env var:

```bash
make PASTE=true <problemset>/diff
make PASTE=true <problemset>/grade
```

### Prepare `grading.zip`

```bash
make <problemset>/source/grading.zip
```
